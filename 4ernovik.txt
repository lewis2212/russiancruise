 ТЗ для улицы.

данные для класса
main.h  149
main.cpp 3895
main.cpp 1756

это находится в описании класса
int     str_count;                          // Count of streets
struct  streets street[30];              // Array of streets
byte    StreetNum;

1. сделать функцию инициализации в которой открывается файл с названием трассы
2. Читать файлы из папки с названием класса RCStreet
3. Список экспортируемых функций
bool IfInited()
char *CurentStreet (byte UCID)
int CurentStreetNum(byte UCID)
int CurentStreetInfo(void StreetInfo, int StreetNum)
int StreetCount()

4. Список импортируемых функций
bool init(char *Track)
void mci()
void next_packet()

5. внутренняя функция btnStreet, выполняется, если игрок въехал на другую улицу

6. для мци пакета информация тут  main.cpp 1756

7. работа функции CurentStreetInfo(void StreetInfo, int StreetNum)
смотри в массиве улицу с номером StreetNum
переменную StreetInfo преобразуем в структуру улицы (main.h  149)
struct streets *street = (streets*)StreetInfo;
strncpy(street->Street,Street[StreetNum].Street,50);
street->NodeBeg = Street[StreetNum].NodeBeg
и .т.д

 _____________________________________________________________________

if day of the week monday call "TrackRotation()"


==================================================================================================
Такси

Миссия такси берется принцепи в любом месте где есть гараж или здание,
Можно вывести такой текст как, Привет новичек, это твое 1е задание
ежай забери на улице 4х ашотов, человека и довези его до улицы магамеда,
это наш постоянный клиент он тебе заплатит с учетом твоего времяни и акуратности езды.
Иди в гараж бери машину и отпровляйся прямо сейчас.
И так, отправляешся в боксы береш машину и скин такси который тебе открывается в начале
приема на работу, у тебя появляются окошки или хз как назвать квадраты прозрачные,
в 1 показанно время
в другом аккуратность езды типа Нервы ||||||||||||||| и проценты, если этот показатель
доходит до 100%
Пассажир орет и просит остановить, не платя не рубля и посылает ищё при этом нахуй, фишка в том ищё
что у некоторых пассажиров может быть хуевый день и нервы их 60% и тд, суть нервов состоит в идеи
акуратной езды, если тебя сносит, бьёт пассажиру не комфортно и он злится, Появляюца в чате надписи
Тип, эй бля, акуратнее, чё за хуйня и тд, при погоне с ментами, нервы доходят до предела,
деньги платят в зависимости от акуратности и времяни, количество человек в машине тоже может менятся
от 1 до 3х, тагже и появляюца новые полоски нервов и цена увеличиваеца.
после того как выполняеш 1е задание работа закрепляется ты приежаееш в таксопарк и тебе
говорят мол ты хорошо справился, можеш ездить по городу, все сообщения о клиентах будут
отправлятся тебе на пейджер/моб/рацию
ну и вот тупо колеся по городу рандомное сообщение выскакиевает в любое время кого
и куда надо отвездти, увольняют с работы
если ты так 5 заданий не выполниш или провалиш.

====================================================================================================

Добовляю к этому вмему что ты запостил что я когдато писал что на дисплее может дорогу
указывать пассажир говоря куда поворачивать тип поверни туда и туда вобщем хз
↕ ← ↖ ↑ ↗ → ↘ ↓ ↙ « » 《》 ↨ ⇦ ⇧ ⇨ ⇩ ⇐⇑ ⇒⇓ ⇔ ⇕ ⇖ ⇗ ⇘ ⇙ ⇚ ⇛ ⇜ ⇝ ⇄ ⇅ ⇆ ⇇ ⇈ ⇉ ⇊ ↺ ↻ ↰ ↱ ↲ ↳ ↴ ↵ ↶ ↷ ˿ ￩ ￪ ￫ ￬
➜ ➝ ➞ ➟ ➡ ➨ ➩ ➪ ➯ ➱ ➲ ⋖ ⋗ ⋘ ⋙ ⋚ ⋛ ⋜ ⋝≤ ≥ ≦ ≧ ≨ ≩ ≪ ≫ ≲ ≳ ➥ ➦

Тюнинг такси: Влияет на комфорт, при не аккуратном вождении пассажиры меньше чувствуют
плохую езду и это меньше сказывается на их нервах, они больше платят,
Тюнинг типа, Кондиционер, Мониторы в подголовниках, Акустика, Подогрев сидений,
все эти параметры будут влиять на параметр Comfort
насчет комфорта пусть показываться в процентах и не постоянно а только в !show
Комфорт автомобиля 50% (Средний) можно например так,
Или просто Комфорт 50%
что насчет GTR машин их точно исключить из такси нужно, это будут представительские
машины или если делать то мафии)
у которой будут поручения отвести куда то что то, это принцепи пересекается идея с копом,
когда машину можно обыскивать да и она старая,
я просто сказал какое решение можно для GTR машин, что касается обычных такси машин самая
низкая это XFG и XRG более высокий класс такси машин это XRT FXO RB4
а самый высокий LX FZ5, у каждой машины в стоке будет определенный процент комфорта,
например XFG с 10% комфорта, XRG с 15%
например если таксист заморачивается тюнингом тратя деньги он может поднять машину 1 из
дешевых до среднего или высокого класса
а машину высокого класса почти до высшего и кстати, что более интересно было бы, если
пассажиры чуствовали превышение скорости и это бы их нервировало
это усложнит езду до определенного места, а некоторые посажиры бы вобще орали гони быстрее
а то не успеем и если бы ты ехал меньше 50 сказали, ты тормоз и вышли из машины,
если ехать без превышений то естественно это усложняет езду, потому что во время уложится
становится сложнее, соответственно у игрока появляется больший интерес к прохождению
такси, что касается подбора клиентов, их можно встретить где угодно, либо тебе через телефон
или ищё чтото говорят, подбросиш тогото оттуда то, кликаеш да, едеш к человеку, ответиш нет,
катаешся дальше ищеш кого бы подкинуть останавливаясь на обочине, такси можно сделать как по
лицензии так и без неё без неё не нужен скин и платят меньше, а с ней ты должен работать
определенное время иначе тебя уволят.

Алгоритм!!!

Алгоритм написан поблочно (для каждой функции обрабатывающей приходящие пакеты)

1. Приход игрока на сервер(NCN)
Чтение нужных данных из файла:
- Сколько пассажиров отвез
- Поощрения
- Замечания
- Машины используемые в работе и их тюнинг (Кондиционер, Мониторы в подголовниках, Акустика, Подогрев сидений)
Если игрока нет в базе, создать.

2. Выход игрока из боксов (NPL)
Чтение из массива параметров машины, если машины нет в списке, создать их и сохранить.

3. Уход в боксы или зрители (PLP PLL)
Сохранение данных об автомобиле

4. Уход с сервера (CNL)
Сохранение данных об игроке

5. Обработка чата (MSO)
устроится/уволиться

6. Обработка позиции авто на карте (MCI)
Если игрок попал в зону-квадрат дилера, выводить в чат команды
Если игрок в состоянии свободен - проверять, если он на ноде голосовальщика, забрать его (генерируется новая точка доставки по принципу заказа такси)
Если игрок занят перевозом пассажиров, тогда проверять NODE, если разница не более 2-3 нодов то отпускать пассажара из машины, если скорость равна нулю и машина стояна секунд 20 (выполнить оплату по зависимостям)
Если растояние между игроком и точкой доставки не более 100 метров, сообщить ему об этом
Если ускорение игрока превышает допустимые нормы, прибавлять нервозность всех пассажиров
Если разница направления движения и направлением корпуса превышают допустимые значения, нервозность ++


7. Отдельный поток
Если время пассажира истекло, то за каждую просроченную секунду нервозность ++
Если нервозность пассажира достагла 90% вывести сообщение о немедленноя остановке
Если нервозность выше 95%, накатать жалобу
// пассажиры
7.1. Заказ такси
по истечению времени-задержки проверять, есть ли среди игроков свободных работников,
если таковые есть, то генерировать точку взятия с названием улицы

генерация точки доставки
из класса "улицы" смотрим колличество улиц, далее в цикле мы генирируем число в диапазоне
количества улиц пока получемое число не станет отличным от текушей улицы игрока
  #incude <time.h>
  srand ( time(NULL) );
  rand() % StreetCount;

  далее мы смотрим в каком диапазоне нодов находится данная улица и генирируем нод доставки

 #incude <time.h>
  srand ( time(NULL) );
  rand() % Street[i].NodeEnd + Street[i].NodeStart;

  записываем нод доставки в структуру
  ждем когда игрок заедет на улицу
  когда игрок въезжает на улицу,то мы смотрим координаты нода и вычисляем расстояние
  до точки назначения и выводим это значение с округлением до кратности 50 (тут, 50 100 150 200 250 и т.д.)



Правила работы в режиме таксиста

Устроившись на работу тассистом выы будете обязаны соблюдать следующие правила:
1. Выход на работу только на машине со спец раскрасской.
2. Соблюдать ПДД во время перевозки пассажира.
3. Во время перевозки пассажира придерживайтесь плавного хода, для сохранения конфорта.
4. Если вы плохо соблюдаете пункт 2 и 3, то вам будет сделан выговор.
5. После 5 выговоров следует или штраф или увольнение без возможности повторного принятия на работу в течении 30 дней.

Итоги работы над такси:
- Чтение и запись данных игрока в файл.
